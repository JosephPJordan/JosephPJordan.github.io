{
  "name": "Josephpjordan.GitHub.io",
  "tagline": "Test of github pages",
  "body": "# Deploying the BIG-IP VE in Azure - Single NIC\r\n\r\n[![Slack Status](https://f5cloudsolutions.herokuapp.com/badge.svg)](https://f5cloudsolutions.herokuapp.com)\r\n[![Doc Status](http://readthedocs.org/projects/f5-sdk/badge/?version=latest)](https://support.f5.com/kb/en-us/products/big-ip_ltm/manuals/product/bigip-ve-setup-msft-azure-12-1-0.html)\r\n\r\n## Introduction\r\n\r\nThis solution implements an ARM Template to deploy a base example of F5 in a cloud-focused single NIC deployment.  This is the standard Cloud design where the compute instance of\r\nF5 is running with a single interface, where both management and data plane traffic is processed.  This is a traditional model in the cloud where the deployment is considered one-armed.\r\n\r\nSee the [Configuration Example](#config) section for a configuration diagram and description for this solution.\r\n\r\n## Documentation\r\n\r\nThe ***BIG-IP Virtual Edition and Microsoft Azure: Setup*** guide (https://support.f5.com/kb/en-us/products/big-ip_ltm/manuals/product/bigip-ve-setup-msft-azure-12-1-0.html) decribes how to create the configuration manually without using the ARM template.\r\n\r\n## Installation\r\n\r\nYou have three options for deploying this template:\r\n  - Using the Azure deploy button\r\n  - Using [PowerShell](#powershell)\r\n  - Using [CLI Tools](#cli)\r\n\r\n### <a name=\"azure\"></a>Azure deploy button\r\n\r\nUse this button to deploy the template:\r\n\r\n<a href=\"https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2FF5Networks%2Ff5-azure-arm-templates%2Fmaster%2Fexperimental%2Fstandalone%2F1nic%2Fazuredeploy.json\" target=\"_blank\">\r\n    <img src=\"http://azuredeploy.net/deploybutton.png\"/>\r\n</a>\r\n\r\n### Template parameters\r\n\r\n| Parameter | Required | Description |\r\n| --- | --- | --- |\r\n| adminUsername | x | A user name to login to the BIG-IPs.  The default value is \"azureuser\". |\r\n| adminPassword | x | A strong password for the BIG-IPs. Remember this password; you will need it later. |\r\n| dnsLabel | x | Unique DNS Name for the public IP address used to access the BIG-IPs for management. |\r\n| instanceName | x | The hostname to be configured for the VM. |\r\n| instanceType | x | The desired Azure Virtual Machine instance size. |\r\n| imageName | x | The desired F5 image to deploy. |\r\n| licenseKey1 | x | The license token from the F5 licensing server. This license will be used for the first F5 BIG-IP. |\r\n| restrictedSrcAddress | x | Restricts management access to a specific network or address. Enter a IP address or address range in CIDR notation, or asterisk for all sources. |\r\n| tagValues | x | Additional key-value pair tags to be added to each Azure resource. |\r\n\r\n### <a name=\"powershell\"></a>PowerShell Script Example\r\n\r\n```powershell\r\n    # Params below match to parameteres in the azuredeploy.json that are gen-unique, otherwsie pointing to\r\n    # the azuredeploy.parameters.json file for default values.  Some options below are mandatory, some(such as deployment password for BIG IP)\r\n    # can be supplied inline when running this script but if they arent then the default will be used as specificed in below param arguments\r\n    # Example Command: .\\Deploy_via_PS.ps1 -adminUsername azureuser -adminPassword yourpassword -dnsLabel f51nicdeploy01 -instanceName f51nic -licenseKey1 XXXXX-XXXXX-XXXXX-XXXXX-XXXXX -resourceGroupName f51nicdeploy01 -EmailTo user@f5.com\r\n\r\n    param(\r\n    [Parameter(Mandatory=$True)]\r\n    [string]\r\n    $adminUsername,\r\n\r\n    [Parameter(Mandatory=$True)]\r\n    [string]\r\n    $adminPassword,\r\n\r\n    [Parameter(Mandatory=$True)]\r\n    [string]\r\n    $dnsLabel,\r\n\r\n    [Parameter(Mandatory=$True)]\r\n    [string]\r\n    $instanceName,\r\n\r\n    [string]\r\n    $instanceType = \"Standard_D2_v2\",\r\n\r\n    [string]\r\n    $imageName = \"Best\",\r\n\r\n    [Parameter(Mandatory=$True)]\r\n    [string]\r\n    $licenseKey1,\r\n\r\n    [string]\r\n    $restrictedSrcAddress  = \"*\",\r\n\r\n    [Parameter(Mandatory=$True)]\r\n    [string]\r\n    $resourceGroupName,\r\n\r\n    [string]\r\n    $region = \"West US\",\r\n\r\n    [string]\r\n    $templateFilePath = \"azuredeploy.json\",\r\n\r\n    [string]\r\n    $parametersFilePath = \"azuredeploy.parameters.json\"\r\n    )\r\n\r\n    Write-Host \"Disclaimer: Scripting to Deploy F5 Solution templates into Cloud Environments are provided as examples. They will be treated as best effort for issues that occur, feedback is encouraged.\" -foregroundcolor green\r\n    Start-Sleep -s 3\r\n\r\n    # Connect to Azure, right now it is only interactive login\r\n    try {\r\n        Write-Host \"Checking if already logged in!\"\r\n        Get-AzureRmSubscription | Out-Null\r\n        Write-Host \"Already logged in, continuing...\"\r\n        }\r\n        Catch {\r\n        Write-Host \"Not logged in, please login...\"\r\n        Login-AzureRmAccount\r\n        }\r\n\r\n    # Create Resource Group for ARM Deployment\r\n    New-AzureRmResourceGroup -Name $resourceGroupName -Location \"$region\"\r\n\r\n    # Create Arm Deployment\r\n    $pwd = ConvertTo-SecureString -String $adminPassword -AsPlainText -Force\r\n    $deployment = New-AzureRmResourceGroupDeployment -Name $resourceGroupName -ResourceGroupName $resourceGroupName -TemplateFile $templateFilePath -TemplateParameterFile $parametersFilePath -Verbose -adminUsername \"$adminUsername\" -adminPassword $pwd -dnsLabel \"$dnsLabel\" -instanceName \"$instanceName\" -instanceType \"$instanceType\" -licenseKey1 \"$licenseKey1\" -restrictedSrcAddress \"$restrictedSrcAddress\" -imageName \"$imageName\"\r\n\r\n    # Print Output of Deployment to Console\r\n    $deployment\r\n```\r\n\r\n=======\r\n\r\n### <a name=\"cli\"></a>Azure CLI(1.0) Script Example\r\n\r\n```bash\r\n    #!/bin/bash\r\n\r\n    # Bash Script to deploy an ARM template into Azure, using azure cli 1.0\r\n    # Example Command: ./deploy_via_bash.sh --adminusr azureuser --adminpwd 'yourpassword' --dnslabel f5dnslabel --instname f5vm01 --key1 XXXXX-XXXXX-XXXXX-XXXXX-XXXXX --rgname f5rgname --azureusr administrator@domain.com --azurepwd 'yourpassword'\r\n\r\n    # Assign Script Paramters and Define Variables\r\n    # Specify static items, change these as needed or make them parameters (instance_type is already an optional paramter)\r\n    region=\"westus\"\r\n    template_file=\"azuredeploy.json\"\r\n    parameter_file=\"azuredeploy.parameters.json\"\r\n    instance_type=\"Standard_D2_v2\"\r\n    image_name=\"Best\"\r\n    restricted_source_address=\"*\"\r\n    tag_values=\"{\\\"application\\\":\\\"APP\\\",\\\"environment\\\":\\\"ENV\\\",\\\"group\\\":\\\"GROUP\\\",\\\"owner\\\":\\\"OWNER\\\",\\\"cost\\\":\\\"COST\\\"}\"\r\n\r\n    ARGS=`getopt -o a:b:c:d:e:f:g:h:i:j:k: --long adminusr:,adminpwd:,dnslabel:,instname:,insttype:,imgname:,key1:,rstsrcaddr:,rgname:,azureusr:,azurepwd: -n $0 -- \"$@\"`\r\n    eval set -- \"$ARGS\"\r\n\r\n\r\n    # Parse the command line arguments, primarily checking full params as short params are just placeholders\r\n    while true; do\r\n        case \"$1\" in\r\n            -a|--adminusr)\r\n                admin_username=$2\r\n                shift 2;;\r\n            -b|--adminpwd)\r\n                admin_password=$2\r\n                shift 2;;\r\n            -c|--dnslabel)\r\n                dns_label=$2\r\n                shift 2;;\r\n            -d|--instname)\r\n                instance_name=$2\r\n                shift 2;;\r\n            -e|--insttype)\r\n                instance_type=$2\r\n                shift 2;;\r\n            -f|--imgname)\r\n                image_name=$2\r\n                shift 2;;\r\n            -g|--key1)\r\n                license_key_1=$2\r\n                shift 2;;\r\n            -h|--rstsrcaddr)\r\n                restricted_source_address=$2\r\n                shift 2;;\r\n            -i|--rgname)\r\n                resource_group_name=$2\r\n                shift 2;;\r\n            -j|--azureusr)\r\n                azure_user=$2\r\n                shift 2;;\r\n            -k|--azurepwd)\r\n                azure_pwd=$2\r\n                shift 2;;\r\n            --)\r\n                shift\r\n                break;;\r\n        esac\r\n    done\r\n\r\n    echo \"Disclaimer: Scripting to Deploy F5 Solution templates into Cloud Environments are provided as examples. They will be treated as best effort for issues that occur, feedback is encouraged.\"\r\n    sleep 3\r\n\r\n    #If a required paramater is not passed, the script will prompt for it below\r\n    required_variables=\"admin_username admin_password dns_label instance_name license_key_1 resource_group_name azure_user azure_pwd\"\r\n    for variable in $required_variables\r\n            do\r\n            if [ -v ${!variable} ] ; then\r\n                    read -p \"Please enter value for $variable:\" $variable\r\n            fi\r\n    done\r\n\r\n    # Login to Azure, for simplicity in this example using username and password supplied as script arguments --azureusr and --azurepwd\r\n    # Perform Check to see if already logged in\r\n    azure account show > /dev/null 2>&1\r\n    if [[ $? != 0 ]] ; then\r\n            azure login -u $azure_user -p $azure_pwd\r\n    fi\r\n\r\n    # Switch to ARM mode\r\n    azure config mode arm\r\n\r\n    # Create ARM Group\r\n    azure group create -n $resource_group_name -l $region\r\n\r\n    # Deploy ARM Template, right now cannot specify parameter file AND parameters inline via Azure CLI,\r\n    # such as can been done with Powershell...oh well!\r\n    azure group deployment create -f $template_file -g $resource_group_name -n $resource_group_name -p \"{\\\"adminUsername\\\":{\\\"value\\\":\\\"$admin_username\\\"},\\\"adminPassword\\\":{\\\"value\\\":\\\"$admin_password\\\"},\\\"dnsLabel\\\":{\\\"value\\\":\\\"$dns_label\\\"},\\\"instanceName\\\":{\\\"value\\\":\\\"$instance_name\\\"},\\\"instanceType\\\":{\\\"value\\\":\\\"$instance_type\\\"},\\\"licenseKey1\\\":{\\\"value\\\":\\\"$license_key_1\\\"},\\\"imageName\\\":{\\\"value\\\":\\\"$image_name\\\"},\\\"restrictedSrcAddress\\\":{\\\"value\\\":\\\"$restricted_source_address\\\"},\\\"tagValues\\\":{\\\"value\\\":$tag_values}}\"\r\n\r\n```\r\n\r\n## Configuration Example <a name=\"config\">\r\n\r\nThe following is a simple configuration diagram for this single NIC deployment. In this scenario, all access to the BIG-IP VE appliance is through the same IP address and virtual network interface (vNIC).  This interface processes both management and data plane traffic.\r\n\r\nNote that while the Management Port shown in the following example is **443**, you can alternatively use **8443** in your configuration.\r\n\r\n![Single NIC configuration example](images/azure-1nic-sm.png)\r\n\r\n\r\n## Design Patterns\r\n\r\n\r\nThe goal is for the design patterns for all the iterative examples of F5 being deployed via ARM templates to closely match as much as possible.\r\n\r\n### List of Patterns For Contributing Developers\r\n\r\n\r\n 1. Still working on patterns to use\r\n\r\n## Filing Issues\r\n\r\nSee the Issues section of `Contributing <CONTRIBUTING.md>`__.\r\n\r\n## Contributing\r\n\r\nSee `Contributing <CONTRIBUTING.md>`__\r\n\r\n## Test\r\n\r\n\r\nBefore you open a pull request, your code must have passed a deployment into Azure with the intended result\r\n\r\n## Unit Tests\r\n\r\nSimply deploying the ARM template and completing use case fulfills a functional test\r\n\r\n\r\n\r\n## Copyright\r\n\r\nCopyright 2014-2016 F5 Networks Inc.\r\n\r\n\r\n## License\r\n\r\n\r\nApache V2.0\r\n~~~~~~~~~~~\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at\r\n\r\nhttp://www.apache.org/licenses/LICENSE-2.0\r\n\r\nUnless required by applicable law or agreed to in writing, software\r\ndistributed under the License is distributed on an \"AS IS\" BASIS,\r\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\nSee the License for the specific language governing permissions and limitations\r\nunder the License.\r\n\r\nContributor License Agreement\r\n~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\nIndividuals or business entities who contribute to this project must have\r\ncompleted and submitted the `F5 Contributor License Agreement`",
  "note": "Don't delete this file! It's used internally to help with page regeneration."
}